BIOS (Basic Input Output System)

キーボードやハードディスクなどのデバイスを制御する、もっとも基本的な制御プログラム。
コンピュータのマザーボードや拡張カードに搭載されたフラッシュROMに書き込まれている。


デバイスファイル

ハードウェアのアクセスを抽象化する。
すべてのハードウェアはデバイスファイルとして表され、デバイスファイルの読み書きを通してハードウェアにアクセスできるようになっている。
デバイスファイルは/devディレクトリ以下にある。
これらのデバイスファイルはudevという仕組みによって自動的に作成される。

Linuxカーネルが認識しているデバイスに関する情報の一部は、/procディレクトリ以下のファイルで確認できる。

lspci

PCIデバイスの情報を確認するためのコマンド。
-vで詳細な情報、-vvでさらに詳細な情報を表示する。


lsusb

USBデバイスの情報を表示するコマンド。


デバイスドライバ

デバイスを利用するために必要な制御プログラム。
必要なデバイスドライバをカーネルに取り込むことを「ロードする」といい、ロードされているカーネルモジュールを確認するにはlsmodコマンドを使う。
通常、必要なデバイスドライバは自動的にロードされるが、手動でロードする場合はmodprobeコマンドを実行する。


システムが起動する流れ

BIOS/UEFI → ブートローダ → カーネル → init/systemd
電源を入れてからシステムが起動するまでの流れをブートまたはブートストラップという。


dmesg

システム起動時にカーネルがどのような処理を行ったかが確認できる。
systemdを採用したシステムでは、journalctl -kコマンドでdmesgコマンドと同様にカーネルのバッファ内容を表示することができる。


shutdown

システムを安全に停止させる。
オプション
-h シャットダウンする
-r シャットダウン後に再起動する
-f 次回起動時にfsckをスキップする（-hまたは-rと組み合わせて利用する）
-F 次回起動時にfsckを必ず実行する（-hまたは-rと組み合わせて利用する）
-k 実際にはシャットダウンせず警告メッセージを通知する
-c 現在実行中のシャットダウンをキャンセルする


SysVinit (System Five init)

システムの電源を入れてからLinuxが起動する手順。
現在ではsystemdという新しい起動の仕組みが主流になってきている。


ランレベル

SysVinitを採用しているシステムでは、ランレベルと呼ばれるいくつかの動作モードがある。
ランレベルごとにどのようなサービスが稼働するか（しないか）を決定できる。

ランレベル（Red Hat Enterprise Linux、CentOS、Fedora）
0 ... 停止
1 ... シングルユーザーモード
2 ... マルチユーザーモード（テキストログイン、NFSサーバは停止）
3 ... マルチユーザーモード（テキストログイン）
4 ... 未使用
5 ... マルチユーザーモード（グラフィカルログイン）
6 ... 再起動
Sまたはs ... シングルユーザーモード

ランレベル（Ubuntu、Debian GNU/Linux）
0 ... 停止
1 ... シングルユーザーモード
2～5 ... マルチユーザーモード
6 ... 再起動
Sまたはs ... シングルユーザーモード

シングルユーザーモードは、rootユーザーだけが利用できる特殊な状態。
シングルユーザーモードでは、一般ユーザーはログインできないので、システムのメンテナンスなど一般ユーザーがシステムを利用していては困る場合などに使われる。


runlevel

現在のランレベルを表示する。
ランレベルを変更するにはrootでinitコマンドもしくはtelinitコマンドを使う。


起動スクリプトによるサービスの管理

SysVinitでは、各種サービスの起動には、/etc/init.dディレクトリ以下に用意されている起動スクリプトが使われる。
/etc/rc<ランレベル>.dディレクトリをみると、各ランレベルで起動するサービス、終了するサービスのスクリプトファイルが配置されている。いずれも/etc/init.dディレクトリ以下にある起動スクリプトへのシンボリックリンク。

起動スクリプトは、システムサービスや各種サーバを起動したり、再起動したり、終了したりする場合に利用する。
たとえばhttpdサービスを起動するには次のようにする。
/etc/init.d/httpd.start
httpdサービスを終了するには次のようにする。
/etc/init.d/httpd.stop

/etc/inittabファイルを変更するとデフォルトのランレベルを変更することができる。


systemd 

systemdを採用したシステムでは、initプロセスの代わりにsystemdプロセスが起動し、各種サービスを管理する。

systemctl

systemdでサービスを管理するコマンド。

システムクロックとハードウェアクロック

コンピュータにはハードウェアとして内蔵された時計が組み込まれており、ハードウェアクロックという。
この時計は電源がオフの状態でも動作する。
Linuxのカーネル内に存在する時計があり、システムクロックという。
システムクロックはLinux起動時にハードウェアクロックを参照して設定されるが、その後は別々に動き続ける。
そのため、起動してからの時間が経過するにつれ、ハードウェアクロックとシステムクロックの差が生じてくる。


dateコマンド

システムクロックを参照して現在の日時が表示される。


hwclockコマンド

ハードウェアクロックの参照や設定を行う。


timedatectlコマンド

systemdを採用したディストリビューションでは、timedatectlコマンドで日付と時刻、タイムゾーンを管理できる。


NTPによる時刻設定

ハードウェアクロックもシステムクロックもあまり正確ではない。
正確な時刻を設定するには、ネットワーク経由でクロックを同期するプロトコルであるNTP(Network Time Protocol)を使い、インターネット上にあるNTPサーバ（タイムサーバ）から正確な時刻を取得する。
Linuxでは、ntpdateコマンドを使ってNTPサーバから正確な時刻を取得できる。

ntpqコマンドを使うと、NTPサーバの状態を照会することができる。
NTPサーバの設定は/etc/ntp.confで行う。


Chrony

ntpd/ntpdateの代替となるNTPサーバ/クライアントソフトウェア。
デーモンプロセスchronydと、クライアントコマンドchronycから構成される。
設定ファイルは/etc/chrony.conf。


システムログの設定

コンピュータの動作状況の記録をログという。
Linuxではsyslogを使って、様々なイベントをログファイルに記録したり、コンソールに表示したりできるようになっている。


ファシリティ

ログメッセージ生成元のプログラムは、メッセージにファシリティとプライオリティをタグ付けして出力する。
ファシリティはメッセージの生成元を表す。


プライオリティ

メッセージの重要度を表す。
プライオリティを低く設定すればするほど、ログとして出力される情報量も多くなる。


loggerコマンド

ログメッセージを生成する。


whoコマンド

ログイン中のユーザーを調べる。
wコマンドを使うと、ログイン中のユーザーに加え、システム情報も表示される。


lastコマンド

最近ログインしたユーザーの一覧を表示する。


lastlogコマンド

/var/log/lastlogファイルを参照し、ユーザーごとに最近のログイン一覧を表示する。


ログファイルのローテーション

ログファイルは放置しておくと、追記される一方なので容量が肥大化していく。
ログファイルのローテーション機能を使うと、古くなったログを切り分けてログファイルが肥大化するのを防ぐ。
ログファイルのローテーション昨日はlogrotateユーティリティが提供している。
logrotateの設定は、/etc/logrotate.confファイルで行う。


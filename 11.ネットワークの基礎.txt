プロトコル

通信を行う上での取り決め。
現在、企業や家庭内のLANやインターネットで使われている最も一般的なプロトコルがTCP/IP。
TCPとIPは別々のプロトコルだが、これにUDP等の関連プロトコルを含め、プロトコル群としてTCP/IPと総称している。


TCP (Transmission Control Protocol)

信頼性の高い通信を実現するためのコネクション型のプロトコル。
コネクション型とは、相手に通信データが正しく届いていることを確認しながら通信するもので、信頼性は高くなる。

TCPの代表的な機能
・途中で消失やエラーが発生したパケットを再送
・パケットの伝送順序を整列

TCPはFTP、Telnet、POP、SMTPといった多数の上位プロトコルで利用される。


IP (Internet Protocol)

TCPやUDP、ICMP等のデータ転送（ルーティング）をつかさどるコネクションレス型のプロトコル。
コネクションレス型とは、相手に通信データが正しく届いているかどうかを確認せず一方的に送信するもので、信頼性は低くなるが伝送速度は速くなる。

IPの代表的な機能
・IPアドレスの規定
・データグラム（伝送単位）の規定
・データグラムが伝送されるネットワーク経路の制御


IPv6

現在一般的に使われているIPプロトコルはバージョン4(IPv4)だが、これを拡張したIPv6も徐々に利用され始めている。
IPv6ではアドレス部分が128ビットあるので、将来にわたって問題なく運用できる。
また、セキュリティ機能などIPv4にはなかった機能も取り入れられている。


UDP (User Datagram Protocol)

データの転送速度に重点を置いたコネクションレス型のプロトコル。
音声や映像のストリーミング配信で利用される。


ICMP (Internet Control Message Protocol)

エラーメッセージや制御メッセージを転送するコネクションレス型のプロトコルで、pingコマンドやtracerouteコマンドで利用される。


IPアドレス

ネットワークに接続された機器を識別するのに使われる。


プライベートアドレス

一部のアドレスはローカルネットワーク内で自由に使うことができる。
クラスごとにプライベートアドレスの範囲が定められている。

クラスA ... 10.0.0.0 ～ 10.255.255.255
クラスB ... 172.16.0.0 ～ 172.31.255.255
クラスC ... 192.168.0.0 ～ 192.168.255.255


CIDR

クラスCでは1ネットワーク当たりのホスト数は254になる。
しかし、クラスによる区分を用いると最小でも組織ごとに256個のIPアドレスが消費されてしまうため、より柔軟な運用のためにCIDR(Classless Inter-Domain Routing)が規定された。


ネットワークの基本設定

コマンドでの設定はシステムやネットワーク機能を再起動すると失われてしまう。
永続的な設定をするには、設定ファイルに設定を記述する。

/etc/hostnameファイル
ホスト名が記述されている。

/etc/hostsファイル
ホスト名とIPアドレスとの対応を記述している。

/etc/network/interfacesファイル
Debian系ディストリビューションでネットワークインターフェースの設定を記述する。

/etc/sysconfig/network-scriptsディレクトリ
Red Hat系ディストリビューションで、さまざまなネットワークインターフェースの設定ファイルが配置されている。


NetworkManager

CentOSやRed Hat Enterprise Linuxでは、ネットワークを管理するサブシステムとしてNetworkManagerが導入されている。
NetworkManagerでは、nmcliコマンドを使ってネットワークの設定、接続の管理、状態の確認などを行う。
ホスト名を設定するにはhostnamectlコマンドを使う。


主なネットワーク設定、管理コマンド

pingコマンド
指定されたホスト（ホスト名もしくはIPアドレス）にICMPパケットを送り、その反応を表示する。
例えばWebサーバにアクセスしてもWebページが表示されない場合、Webサーバソフトウェアがダウンしているのか、ホスト自身がダウンしているのかなどを確認するために利用する。
IPv6環境ではping6コマンドを使う。

tracerouteコマンド
指定されたホスト（ホスト名もしくはIPアドレス）までパケットが伝わる経路を表示する。
pingコマンドでは、宛先からの反応が無かった場合、ホスト自身に問題があるのかホストに到達するまでのネットワーク経路に問題があるのかは判別できない。
tracerouteコマンドでは、宛先までのルータやホストが順に表示されるため、ネットワーク経路上に障害があった場合はその位置を特定できる可能性がある。
IPv6環境ではtraceroute6コマンドを使う。

tracepathコマンド
tracerouteコマンドと同様、指定されたホスト（ホスト名もしくはIPアドレス）までパケットが伝わる経路を表示する。
IPv6環境では、tracepath6コマンドを使う。

hostnameコマンド
ホスト名を指定しなかった場合、現在のホスト名を表示する。
ホスト名を指定した場合、ホスト名を変更する。
ホスト名を変更できるのはrootユーザーのみ。

netstatコマンド
ネットワーク機能に関する様々な情報を表示する。
開いているポートの確認に利用する。

ncコマンド
nc(netcat)コマンドは、テキストストリームにおけるcatコマンドと同様の働きをネットワーク上で行うコマンド。
ネットワーク通信の確認などに利用できる。

routeコマンド
ルーティングテーブルの表示や操作を行う。
ルーティングとは、複数のネットワーク間でデータが正しく届くように、IPパケットの通過する経路（ルート）を制御すること。
そのための情報が記述されているのがルーティングテーブル。

ipコマンド
ネットワークインターフェースやルーティングテーブル、ARPテーブルなどを管理するコマンド。
routeコマンドや、ifconfigコマンドなどを合わせたような働きをする。


ifconfigコマンド

ネットワークインターフェースの状態を表示したり、設定を行ったりする。




ifupコマンド、ifdownコマンド

指定したネットワークインターフェースを有効にする、無効にするといった操作をする。


DNS(Domain Name System)

ホスト名とIPアドレスを相互に変換する。これを名前解決という。
ホスト名からIPアドレスを求めることを正引き、反対を逆引きという。


FQDN(Fully Qualified Domain Name　完全修飾ドメイン名)

www.example.comのように、省略しないで表した名前。


/etc/resolv.confファイル

DNSによる名前解決を利用するには、どこにあるDNSサーバを参照するか設定する必要がある。
参照先DNSサーバは、/etc/resolv.confファイルに設定する。


/etc/nsswitch.confファイル

名前解決をする手段はさまざまで、例えばホスト名とIPアドレスの名前解決では、1. /etc/hostsファイルを使う、2. DNSサーバに問い合わせる、3. LDAPサーバに問い合わせるといった手段が考えられる。
それらをどういう順序で利用するか設定するファイル。


hostコマンド

DNSサーバを使ってホストやドメインに関する情報を表示する。
デフォルトでは、ホスト名とIPアドレスの変換を行う。


digコマンド

DNSサーバに登録されている情報を詳しく表示できる。
